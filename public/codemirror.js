window.CodeMirror=function(){"use strict";function a(d,e){function lb(a){f.onDragEvent&&f.onDragEvent(ob,$(a))||ba(a)}function nb(a){return a>=0&&a<Ia.size}function pb(a){return U(Ia,a)}function qb(a,b){Za=!0;for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function rb(a,b){return a.styles||a.highlight(Ha,a.stateAfter=hd(V(a)),f.tabSize),a.getContent(f.tabSize,b,f.lineWrapping)}function sb(a){var b={line:0,ch:0};Kb(b,{line:Ia.size-1,ch:pb(Ia.size-1).text.length},Da(a),b,b),Ua=!0}function tb(a){var b=[];return Ia.iter(0,Ia.size,function(a){b.push(a.text)}),b.join(a||"\n")}function ub(a){Math.abs(E.scrollTop-Pa)>1&&(Pa=la.scrollTop=E.scrollTop,gc([]))}function vb(a){f.fixedGutter&&aa.style.left!=la.scrollLeft+"px"&&(aa.style.left=la.scrollLeft+"px"),Math.abs(la.scrollTop-Pa)>1&&(Pa=la.scrollTop,E.scrollTop!=Pa&&(E.scrollTop=Pa),gc([])),f.onScroll&&f.onScroll(ob)}function wb(a){function h(b){t&&(la.draggable=!1),Qa=!1,k(),l(),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(_(b),pc(c.line,c.ch,!0),ac())}function q(a){if("single"==e)return void mc(rc(c),a);if(m=rc(m),n=rc(n),"double"==e){var b=wc(a);ta(a,m)?mc(b.from,n):mc(m,b.to)}else"triple"==e&&(ta(a,m)?mc(n,rc({line:a.line,ch:0})):mc(m,rc({line:a.line+1,ch:0})))}function r(a){var b=ad(a,!0);if(b&&!sa(b,i)){Ka||Ib(),i=b,q(b),Ua=!1;var c=fc();(b.line>=c.to||b.line<c.from)&&(j=setTimeout(nd(function(){r(a)}),150))}}function s(a){clearTimeout(j);var b=ad(a);b&&q(b),_(a),ac(),Ua=!0,u(),k()}lc(ea(a,"shiftKey"));for(var b=ca(a);b!=oa;b=b.parentNode)if(b.parentNode==ka&&b!=ja)return;for(var b=ca(a);b!=oa;b=b.parentNode)if(b.parentNode==Z)return f.onGutterClick&&f.onGutterClick(ob,Aa(Z.childNodes,b)+ab,a),_(a);var c=ad(a);switch(da(a)){case 3:return void(o&&cd(a));case 2:return c&&pc(c.line,c.ch,!0),setTimeout(ac,20),void _(a)}if(!c)return void(ca(a)==la&&_(a));Ka||Ib();var d=+new Date,e="single";if(Oa&&Oa.time>d-400&&sa(Oa.pos,c))e="triple",_(a),setTimeout(ac,20),xc(c.line);else if(Na&&Na.time>d-400&&sa(Na.pos,c)){e="double",Oa={time:d,pos:c},_(a);var g=wc(c);mc(g.from,g.to)}else Na={time:d,pos:c};var j,i=c;if(f.dragDrop&&ia&&!f.readOnly&&!sa(La.from,La.to)&&!ta(c,La.from)&&!ta(La.to,c)&&"single"==e){t&&(la.draggable=!0);var k=fa(document,"mouseup",nd(h),!0),l=fa(la,"drop",nd(h),!0);return Qa=!0,void(la.dragDrop&&la.dragDrop())}_(a),"single"==e&&pc(c.line,c.ch,!0);var m=La.from,n=La.to,u=fa(document,"mousemove",nd(function(a){clearTimeout(j),_(a),p||da(a)?r(a):s(a)}),!0),k=fa(document,"mouseup",nd(s),!0)}function xb(a){for(var b=ca(a);b!=oa;b=b.parentNode)if(b.parentNode==Z)return _(a);_(a)}function yb(a){if(!f.onDragEvent||!f.onDragEvent(ob,$(a))){_(a);var b=ad(a,!0),c=a.dataTransfer.files;if(b&&!f.readOnly)if(c&&c.length&&window.FileReader&&window.File)for(var d=c.length,e=Array(d),g=0,h=function(a,c){var f=new FileReader;f.onload=function(){e[c]=f.result,++g==d&&(b=rc(b),nd(function(){var a=Sb(e.join(""),b,b);mc(b,a)})())},f.readAsText(a)},i=0;i<d;++i)h(c[i],i);else{if(Qa&&!ta(b,La.from)&&!ta(La.to,b))return;try{var e=a.dataTransfer.getData("Text");e&&od(function(){var a=La.from,c=La.to;mc(b,b),Qa&&Sb("",a,c),Tb(e),ac()})}catch(a){}}}}function zb(a){var b=Wb();a.dataTransfer.setData("Text",b),a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(va("img"),0,0)}function Ab(a,b){if("string"==typeof a&&(a=j[a],!a))return!1;var c=Ma;try{f.readOnly&&(Sa=!0),b&&(Ma=null),a(ob)}catch(a){if(a!=ha)throw a;return!1}finally{Ma=c,Sa=!1}return!0}function Cb(a){function h(){g=!0}var b=l(f.keyMap),c=b.auto;clearTimeout(Bb),c&&!n(a)&&(Bb=setTimeout(function(){l(f.keyMap)==b&&(f.keyMap=c.call?c.call(null,ob):c)},50));var d=Fa[ea(a,"keyCode")],e=!1;if(null==d||a.altGraphKey)return!1;ea(a,"altKey")&&(d="Alt-"+d),ea(a,B?"metaKey":"ctrlKey")&&(d="Ctrl-"+d),ea(a,B?"ctrlKey":"metaKey")&&(d="Cmd-"+d);var g=!1;return e=ea(a,"shiftKey")?m("Shift-"+d,f.extraKeys,f.keyMap,function(a){return Ab(a,!0)},h)||m(d,f.extraKeys,f.keyMap,function(a){if("string"==typeof a&&/^go[A-Z]/.test(a))return Ab(a)},h):m(d,f.extraKeys,f.keyMap,Ab,h),g&&(e=!1),e&&(_(a),dd(),r&&(a.oldKeyCode=a.keyCode,a.keyCode=0)),e}function Db(a,b){var c=m("'"+b+"'",f.extraKeys,f.keyMap,function(a){return Ab(a,!0)});return c&&(_(a),dd()),c}function Fb(a){if(Ka||Ib(),p&&27==a.keyCode&&(a.returnValue=!1),hb&&$b()&&(hb=!1),!f.onKeyEvent||!f.onKeyEvent(ob,$(a))){var b=ea(a,"keyCode");lc(16==b||ea(a,"shiftKey"));var d=Cb(a);w&&(Eb=d?b:null,!d&&88==b&&ea(a,c?"metaKey":"ctrlKey")&&Tb(""))}}function Gb(a){if(hb&&$b(),!f.onKeyEvent||!f.onKeyEvent(ob,$(a))){var b=ea(a,"keyCode"),c=ea(a,"charCode");if(w&&b==Eb)return Eb=null,void _(a);if(!(w&&(!a.which||a.which<10)||y)||!Cb(a)){var d=String.fromCharCode(null==c?b:c);f.electricChars&&Ha.electricChars&&f.smartIndent&&!f.readOnly&&Ha.electricChars.indexOf(d)>-1&&setTimeout(nd(function(){zc(La.to.line,"smart")}),75),Db(a,d)||Yb()}}}function Hb(a){f.onKeyEvent&&f.onKeyEvent(ob,$(a))||16==ea(a,"keyCode")&&(Ma=null)}function Ib(){"nocursor"!=f.readOnly&&(Ka||(f.onFocus&&f.onFocus(ob),Ka=!0,la.className.search(/\bCodeMirror-focused\b/)==-1&&(la.className+=" CodeMirror-focused")),Xb(),dd())}function Jb(){Ka&&(f.onBlur&&f.onBlur(ob),Ka=!1,db&&nd(function(){db&&(db(),db=null)})(),la.className=la.className.replace(" CodeMirror-focused","")),clearInterval(Ga),setTimeout(function(){Ka||(Ma=null)},150)}function Kb(a,b,c,d,e){if(!Sa){var g=[];if(Ia.iter(a.line,b.line+1,function(a){g.push(N(a.text,a.markedSpans))}),jb)for(jb.addChange(a.line,c.length,g);jb.done.length>f.undoDepth;)jb.done.shift();var h=K(M(g[0]),M(qa(g)),a.ch,b.ch,c);Ob(a,b,h,d,e)}}function Lb(a,b){if(a.length){for(var c=a.pop(),d=[],e=c.length-1;e>=0;e-=1){var f=c[e],g=[],h=f.start+f.added;Ia.iter(f.start,h,function(a){g.push(N(a.text,a.markedSpans))}),d.push({start:f.start,added:f.old.length,old:g});var i={line:f.start+f.old.length-1,ch:za(L(qa(g)),L(qa(f.old)))};Ob({line:f.start,ch:0},{line:h-1,ch:pb(h-1).text.length},f.old,i,i)}Ua=!0,b.push(d)}}function Mb(){Lb(jb.done,jb.undone)}function Nb(){Lb(jb.undone,jb.done)}function Ob(a,b,c,d,e){function u(a){return a<=Math.min(b.line,b.line+r)?a:a+r}if(!Sa){var g=!1,h=eb.text.length;f.lineWrapping||Ia.iter(a.line,b.line+1,function(a){if(!a.hidden&&a.text.length==h)return g=!0,!0}),(a.line!=b.line||c.length>1)&&(Za=!0);var i=b.line-a.line,j=pb(a.line),k=pb(b.line),l=qa(c);if(0==a.ch&&0==b.ch&&""==L(l)){for(var m=[],o=0,p=c.length-1;o<p;++o)m.push(new R(L(c[o]),M(c[o])));k.update(k.text,M(l)),i&&Ia.remove(a.line,i,$a),m.length&&Ia.insert(a.line,m)}else if(j==k)if(1==c.length)j.update(j.text.slice(0,a.ch)+L(c[0])+j.text.slice(b.ch),M(c[0]));else{for(var m=[],o=1,p=c.length-1;o<p;++o)m.push(new R(L(c[o]),M(c[o])));m.push(new R(L(l)+j.text.slice(b.ch),M(l))),j.update(j.text.slice(0,a.ch)+L(c[0]),M(c[0])),Ia.insert(a.line+1,m)}else if(1==c.length)j.update(j.text.slice(0,a.ch)+L(c[0])+k.text.slice(b.ch),M(c[0])),Ia.remove(a.line+1,i,$a);else{var m=[];j.update(j.text.slice(0,a.ch)+L(c[0]),M(c[0])),k.update(L(l)+k.text.slice(b.ch),M(l));for(var o=1,p=c.length-1;o<p;++o)m.push(new R(L(c[o]),M(c[o])));i>1&&Ia.remove(a.line+1,i-1,$a),Ia.insert(a.line+1,m)}if(f.lineWrapping){var q=Math.max(5,la.clientWidth/Zc()-3);Ia.iter(a.line,a.line+c.length,function(a){if(!a.hidden){var b=Math.ceil(a.text.length/q)||1;b!=a.height&&qb(a,b)}})}else Ia.iter(a.line,a.line+c.length,function(a){var b=a.text;!a.hidden&&b.length>h&&(eb=a,h=b.length,gb=!0,g=!1)}),g&&(fb=!0);Ja=Math.min(Ja,a.line),jd(400);var r=c.length-i-1;if(Wa.push({from:a.line,to:b.line+1,diff:r}),f.onChange){for(var o=0;o<c.length;++o)"string"!=typeof c[o]&&(c[o]=c[o].text);var s={from:a,to:b,text:c};if(Xa){for(var t=Xa;t.next;t=t.next);t.next=s}else Xa=s}nc(rc(d),rc(e),u(La.from.line),u(La.to.line))}}function Pb(){var a=Ia.height*Wc()+2*$c();return.99*a>la.offsetHeight&&a}function Qb(a){var b=Pb();E.style.display=b?"block":"none",b?(A.style.height=ka.style.minHeight=b+"px",E.style.height=la.clientHeight+"px",null!=a&&(E.scrollTop=la.scrollTop=a,t&&setTimeout(function(){E.scrollTop==a&&(E.scrollTop=a+(a?-1:1),E.scrollTop=a)},0))):ka.style.minHeight="",ja.style.top=_a*Wc()+"px"}function Rb(){eb=pb(0),gb=!0;var a=eb.text.length;Ia.iter(1,Ia.size,function(b){var c=b.text;!b.hidden&&c.length>a&&(a=c.length,eb=b)}),fb=!1}function Sb(a,b,c){function d(d){if(ta(d,b))return d;if(!ta(c,d))return e;var f=d.line+a.length-(c.line-b.line)-1,g=d.ch;return d.line==c.line&&(g+=qa(a).length-(c.ch-(c.line==b.line?b.ch:0))),{line:f,ch:g}}b=rc(b),c=c?rc(c):b,a=Da(a);var e;return Ub(a,b,c,function(a){return e=a,{from:d(La.from),to:d(La.to)}}),e}function Tb(a,b){Ub(Da(a),La.from,La.to,function(a){return"end"==b?{from:a,to:a}:"start"==b?{from:La.from,to:La.from}:{from:La.from,to:a}})}function Ub(a,b,c,d){var e=1==a.length?a[0].length+b.ch:qa(a).length,f=d({line:b.line+a.length-1,ch:e});Kb(b,c,a,f.from,f.to)}function Vb(a,b,c){var d=a.line,e=b.line;if(d==e)return pb(d).text.slice(a.ch,b.ch);var f=[pb(d).text.slice(a.ch)];return Ia.iter(d+1,e,function(a){f.push(a.text)}),f.push(pb(e).text.slice(0,b.ch)),f.join(c||"\n")}function Wb(a){return Vb(La.from,La.to,a)}function Xb(){hb||ya.set(f.pollInterval,function(){$b(),Ka&&Xb()})}function Yb(){function b(){var c=$b();c||a?(hb=!1,Xb()):(a=!0,ya.set(60,b))}var a=!1;hb=!0,ya.set(20,b)}function $b(){if(!Ka||Ea(v)||f.readOnly)return!1;var a=v.value;if(a==Zb)return!1;md||kd(),Ma=null;for(var b=0,c=Math.min(Zb.length,a.length);b<c&&Zb[b]==a[b];)++b;return b<Zb.length?La.from={line:La.from.line,ch:La.from.ch-(Zb.length-b)}:Ra&&sa(La.from,La.to)&&!Ta&&(La.to={line:La.to.line,ch:Math.min(pb(La.to.line).text.length,La.to.ch+(a.length-b))}),Tb(a.slice(b),"end"),a.length>1e3?v.value=Zb="":Zb=a,md||ld(),Ta=!1,!0}function _b(a){sa(La.from,La.to)?a&&(Zb=v.value=""):(Zb="",v.value=Wb(),Ka&&ra(v))}function ac(){"nocursor"==f.readOnly||!r&&document.activeElement==v||v.focus()}function bc(){var a=cc();if(dc(a.x,a.y,a.x,a.yBot),Ka){var b=ka.getBoundingClientRect(),c=null;if(a.y+b.top<0?c=!0:a.y+b.top+Wc()>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),null!=c){var d="none"==J.style.display;d&&(J.style.display="",J.style.left=a.x+"px",J.style.top=a.y-_a+"px"),J.scrollIntoView(c),d&&(J.style.display="none")}}}function cc(){var a=Qc(La.inverted?La.from:La.to),b=f.lineWrapping?Math.min(a.x,Q.offsetWidth):a.x;return{x:b,y:a.y,yBot:a.yBot}}function dc(a,b,c,d){var e=ec(a,b,c,d);null!=e.scrollLeft&&(la.scrollLeft=e.scrollLeft),null!=e.scrollTop&&(E.scrollTop=la.scrollTop=e.scrollTop)}function ec(a,b,c,d){var e=_c(),g=$c();b+=g,d+=g,a+=e,c+=e;var h=la.clientHeight,i=E.scrollTop,j={},k=Pb()||1/0,l=b<g+10,m=d+g>k-10;b<i?j.scrollTop=l?0:Math.max(0,b):d>i+h&&(j.scrollTop=(m?k:d)-h);var n=la.clientWidth,o=la.scrollLeft,p=f.fixedGutter?aa.clientWidth:0,q=a<p+e+10;return a<o+p||q?(q&&(a=0),j.scrollLeft=Math.max(0,a-10-p)):c>n+o-3&&(j.scrollLeft=c+10-n),j}function fc(a){var b=Wc(),c=(null!=a?a:E.scrollTop)-$c(),d=Math.max(0,Math.floor(c/b)),e=Math.ceil((c+la.clientHeight)/b);return{from:W(Ia,d),to:W(Ia,e)}}function gc(a,b,c){function o(){var a=F.firstChild,b=!1;return Ia.iter(ab,bb,function(c){if(a){if(!c.hidden){var d=Math.round(a.offsetHeight/l)||1;c.height!=d&&(qb(c,d),Za=b=!0)}a=a.nextSibling}}),b}if(!la.clientWidth)return void(ab=bb=_a=0);var d=fc(c);if(a!==!0&&0==a.length&&d.from>ab&&d.to<bb)return void Qb(c);var e=Math.max(d.from-100,0),g=Math.min(Ia.size,d.to+100);ab<e&&e-ab<20&&(e=ab),bb>g&&bb-g<20&&(g=Math.min(Ia.size,bb));for(var h=a===!0?[]:hc([{from:ab,to:bb,domStart:0}],a),i=0,j=0;j<h.length;++j){var k=h[j];k.from<e&&(k.domStart+=e-k.from,k.from=e),k.to>g&&(k.to=g),k.from>=k.to?h.splice(j--,1):i+=k.to-k.from}if(i==g-e&&e==ab&&g==bb)return void Qb(c);h.sort(function(a,b){return a.domStart-b.domStart});var l=Wc(),m=aa.style.display;F.style.display="none",ic(e,g,h),F.style.display=aa.style.display="";var n=e!=ab||g!=bb||cb!=la.clientHeight+l;if(n&&(cb=la.clientHeight+l),(e!=ab||g!=bb&&f.onViewportChange)&&setTimeout(function(){f.onViewportChange&&f.onViewportChange(ob,e,g)}),ab=e,bb=g,_a=X(Ia,e),jd(100),F.childNodes.length!=bb-ab)throw new Error("BAD PATCH! "+JSON.stringify(h)+" size="+(bb-ab)+" nodes="+F.childNodes.length);return f.lineWrapping&&o(),aa.style.display=m,(n||Za)&&jc()&&f.lineWrapping&&o()&&jc(),Qb(c),kc(),!b&&f.onUpdate&&f.onUpdate(ob),!0}function hc(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;h<i;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g,domStart:j.domStart}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from,domStart:j.domStart}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g,domStart:j.domStart+(e.to-j.from)}))}a=f}return a}function ic(a,b,c){function d(a){var b=a.nextSibling;return a.parentNode.removeChild(a),b}if(c.length){for(var e=0,f=F.firstChild,h=0;h<c.length;++h){for(var i=c[h];i.domStart>e;)f=d(f),e++;for(var j=0,k=i.to-i.from;j<k;++j)f=f.nextSibling,e++}for(;f;)f=d(f)}else wa(F);var l=c.shift(),f=F.firstChild,j=a;Ia.iter(a,b,function(a){if(l&&l.to==j&&(l=c.shift()),!l||l.from>j){if(a.hidden)var b=va("pre");else{var b=rb(a);if(a.className&&(b.className=a.className),a.bgClassName){var d=va("pre"," ",a.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");b=va("div",[d,b],null,"position: relative")}}F.insertBefore(b,f)}else f=f.nextSibling;++j})}function jc(){if(f.gutter||f.lineNumbers){var a=ja.offsetHeight,b=la.clientHeight;aa.style.height=(a-b<2?b:a)+"px";var e,c=document.createDocumentFragment(),d=ab;if(Ia.iter(ab,Math.max(bb,ab+1),function(a){if(a.hidden)c.appendChild(va("pre"));else{var b=a.gutterMarker,g=f.lineNumbers?f.lineNumberFormatter(d+f.firstLineNumber):null;b&&b.text?g=b.text.replace("%N%",null!=g?g:""):null==g&&(g=" ");var h=c.appendChild(va("pre",null,b&&b.style));h.innerHTML=g;for(var i=1;i<a.height;++i)h.appendChild(va("br")),h.appendChild(document.createTextNode(" "));b||(e=d)}++d}),aa.style.display="none",xa(Z,c),null!=e&&f.lineNumbers){for(var g=Z.childNodes[e-ab],h=String(Ia.size).length,i=na(g.firstChild),j="";i.length+j.length<h;)j+=" ";j&&g.insertBefore(document.createTextNode(j),g.firstChild)}aa.style.display="";var k=Math.abs((parseInt(Q.style.marginLeft)||0)-aa.offsetWidth)>2;return Q.style.marginLeft=aa.offsetWidth+"px",Za=!1,k}}function kc(){var a=sa(La.from,La.to),b=Qc(La.from,!0),c=a?b:Qc(La.to,!0),d=La.inverted?b:c,e=Wc(),g=ma(oa),h=ma(F);if(x.style.top=Math.max(0,Math.min(la.offsetHeight,d.y+h.top-g.top))+"px",x.style.left=Math.max(0,Math.min(la.offsetWidth,d.x+h.left-g.left))+"px",a||f.showCursorWhenSelecting?(J.style.top=d.y+"px",J.style.left=(f.lineWrapping?Math.min(d.x,Q.offsetWidth):d.x)+"px",J.style.display=""):J.style.display="none",a)I.style.display="none";else{var i=b.y==c.y,j=document.createDocumentFragment(),k=Q.clientWidth||Q.offsetWidth,l=Q.clientHeight||Q.offsetHeight,m=function(a,b,c,d){var e=s?"width: "+(c?k-c-a:k)+"px":"right: "+(c-1)+"px";j.appendChild(va("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; "+e+"; height: "+d+"px"))};if(La.from.ch&&b.y>=0){var n=i?k-c.x:0;m(b.x,b.y,n,e)}var o=Math.max(0,b.y+(La.from.ch?e:0)),p=Math.min(c.y,l)-o;p>.2*e&&m(0,o,0,p),i&&La.from.ch||!(c.y<l-.5*e)||m(0,c.y,k-c.x,e),xa(I,j),I.style.display=""}}function lc(a){Ma=a?Ma||(La.inverted?La.to:La.from):null}function mc(a,b){var c=Ma&&rc(Ma);c&&(ta(c,a)?a=c:ta(b,c)&&(b=c)),nc(a,b),Va=!0}function nc(a,b,c,d){if(ib=null,null==c&&(c=La.from.line,d=La.to.line),!sa(La.from,a)||!sa(La.to,b)){if(ta(b,a)){var e=b;b=a,a=e}if(a.line!=c){var g=oc(a,c,La.from.ch);g?a=g:Nc(a.line,!1)}if(b.line!=d&&(b=oc(b,d,La.to.ch)),sa(a,b)?La.inverted=!1:sa(a,La.to)?La.inverted=!1:sa(b,La.from)&&(La.inverted=!0),f.autoClearEmptyLines&&sa(La.from,La.to)){var h=La.inverted?a:b;if(h.line!=La.from.line&&La.from.line<Ia.size){var i=pb(La.from.line);/^\s+$/.test(i.text)&&setTimeout(nd(function(){if(i.parent&&/^\s+$/.test(i.text)){var a=V(i);Sb("",{line:a,ch:0},{line:a,ch:i.text.length})}},10))}}La.from=a,La.to=b,Ya=!0}}function oc(a,b,c){function d(b){for(var d=a.line+b,e=1==b?Ia.size:-1;d!=e;){var g=pb(d);if(!g.hidden){var h=a.ch;return(f||h>c||h>g.text.length)&&(h=g.text.length),{line:d,ch:h}}d+=b}}var e=pb(a.line),f=a.ch==e.text.length&&a.ch!=c;return e.hidden?a.line>=b?d(1)||d(-1):d(-1)||d(1):a}function pc(a,b,c){var d=rc({line:a,ch:b||0});(c?mc:nc)(d,d)}function qc(a){return Math.max(0,Math.min(a,Ia.size-1))}function rc(a){if(a.line<0)return{line:0,ch:0};if(a.line>=Ia.size)return{line:Ia.size-1,ch:pb(Ia.size-1).text.length};var b=a.ch,c=pb(a.line).text.length;return null==b||b>c?{line:a.line,ch:c}:b<0?{line:a.line,ch:0}:a}function sc(a,b){function g(){for(var b=d+a,c=a<0?-1:Ia.size;b!=c;b+=a){var e=pb(b);if(!e.hidden)return d=b,f=e,!0}}function h(b){if(e==(a<0?0:f.text.length)){if(b||!g())return!1;e=a<0?f.text.length:0}else e+=a;return!0}var c=La.inverted?La.from:La.to,d=c.line,e=c.ch,f=pb(d);if("char"==b)h();else if("column"==b)h(!0);else if("word"==b)for(var i=!1;!(a<0)||h();){if(Ca(f.text.charAt(e)))i=!0;else if(i){a<0&&(a=1,h());break}if(a>0&&!h())break}return{line:d,ch:e}}function tc(a,b){var c=a<0?La.from:La.to;(Ma||sa(La.from,La.to))&&(c=sc(a,b)),pc(c.line,c.ch,!0)}function uc(a,b){sa(La.from,La.to)?a<0?Sb("",sc(a,b),La.to):Sb("",La.from,sc(a,b)):Sb("",La.from,La.to),Va=!0}function vc(a,b){var d=Qc(La.inverted?La.from:La.to,!0);if(null!=ib&&(d.x=ib),"page"==b)var e=Math.min(la.clientHeight,window.innerHeight||document.documentElement.clientHeight),f=Rc(d.x,d.y+e*a);else if("line"==b)var g=Wc(),f=Rc(d.x,d.y+.5*g+a*g);"page"==b&&(E.scrollTop+=Qc(f,!0).y-d.y),pc(f.line,f.ch,!0),ib=d.x}function wc(a){var b=pb(a.line).text,c=a.ch,d=a.ch;if(b){a.after===!1||d==b.length?--c:++d;for(var e=b.charAt(c),f=Ca(e)?Ca:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&Ca(a)};c>0&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return{from:{line:a.line,ch:c},to:{line:a.line,ch:d}}}function xc(a){mc({line:a,ch:0},rc({line:a+1,ch:0}))}function yc(a){if(sa(La.from,La.to))return zc(La.from.line,a);for(var b=La.to.line-(La.to.ch?0:1),c=La.from.line;c<=b;++c)zc(c,a)}function zc(a,b){if(b||(b="add"),"smart"==b)if(Ha.indent)var c=hd(a);else b="prev";var h,d=pb(a),e=d.indentation(f.tabSize),g=d.text.match(/^\s*/)[0];"smart"==b&&(h=Ha.indent(c,d.text.slice(g.length),d.text),h==ha&&(b="prev")),"prev"==b?h=a?pb(a-1).indentation(f.tabSize):0:"add"==b?h=e+f.indentUnit:"subtract"==b&&(h=e-f.indentUnit),h=Math.max(0,h);var j="",k=0;if(f.indentWithTabs)for(var l=Math.floor(h/f.tabSize);l;--l)k+=f.tabSize,j+="\t";k<h&&(j+=pa(h-k)),j!=g&&Sb(j,{line:a,ch:0},{line:a,ch:g.length}),d.stateAfter=null}function Ac(){Ha=a.getMode(f,f.mode),Ia.iter(0,Ia.size,function(a){a.stateAfter=null}),Ja=0,jd(100)}function Bc(){var a=f.gutter||f.lineNumbers;aa.style.display=a?"":"none",a?Za=!0:F.parentNode.style.marginLeft=0}function Cc(a,b){if(f.lineWrapping){oa.className+=" CodeMirror-wrap";var c=la.clientWidth/Zc()-3;Ia.iter(0,Ia.size,function(a){if(!a.hidden){var b=Math.ceil(a.text.length/c)||1;1!=b&&qb(a,b)}}),Q.style.minWidth=O.style.left=""}else oa.className=oa.className.replace(" CodeMirror-wrap",""),Rb(),Ia.iter(0,Ia.size,function(a){1==a.height||a.hidden||qb(a,1)});Wa.push({from:0,to:Ia.size})}function Dc(){la.className=la.className.replace(/\s*cm-s-\S+/g,"")+f.theme.replace(/(^|\s)\s*/g," cm-s-")}function Ec(){var a=k[f.keyMap].style;oa.className=oa.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function Fc(a,b){this.lines=[],this.type=a,b&&(this.style=b)}function Gc(a,b,c,d){a=rc(a),b=rc(b);var e=new Fc("range",c);if(d)for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);var g=a.line;return Ia.iter(g,b.line+1,function(c){var d={from:g==a.line?a.ch:null,to:g==b.line?b.ch:null,marker:e};c.markedSpans=(c.markedSpans||[]).concat([d]),e.lines.push(c),++g}),Wa.push({from:a.line,to:b.line+1}),e}function Hc(a){a=rc(a);var b=new Fc("bookmark"),c=pb(a.line);jb.addChange(a.line,1,[N(c.text,c.markedSpans)],!0);var d={from:a.ch,to:a.ch,marker:b};return c.markedSpans=(c.markedSpans||[]).concat([d]),b.lines.push(c),b}function Ic(a){a=rc(a);var b=[],c=pb(a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker)}return b}function Jc(a,b,c){return"number"==typeof a&&(a=pb(qc(a))),a.gutterMarker={text:b,style:c},Za=!0,a}function Kc(a){"number"==typeof a&&(a=pb(qc(a))),a.gutterMarker=null,Za=!0}function Lc(a,b){var c=a,d=a;return"number"==typeof a?d=pb(qc(a)):c=V(a),null==c?null:b(d,c)?(Wa.push({from:c,to:c+1}),d):null}function Mc(a,b,c){return Lc(a,function(a){if(a.className!=b||a.bgClassName!=c)return a.className=b,a.bgClassName=c,!0})}function Nc(a,b){return Lc(a,function(a,c){if(a.hidden!=b){a.hidden=b,f.lineWrapping||(b&&a.text.length==eb.text.length?fb=!0:!b&&a.text.length>eb.text.length&&(eb=a,fb=!1)),qb(a,b?0:1);var d=La.from.line,e=La.to.line;if(b&&(d==c||e==c)){var g=d==c?oc({line:d,ch:0},d,0):La.from,h=e==c?oc({line:e,ch:0},e,0):La.to;if(!h)return;nc(g,h)}return Za=!0}})}function Oc(a){if("number"==typeof a){if(!nb(a))return null;var b=a;if(a=pb(a),!a)return null}else{var b=V(a);if(null==b)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className,bgClass:a.bgClassName}}function Pc(a,b){if(0==b)return{top:0,left:0};var c=rb(a,b);xa(P,c);var d=c.anchor,e=d.offsetTop,f=d.offsetLeft;if(p&&0==e&&0==f){var g=va("span","x");d.parentNode.insertBefore(g,d.nextSibling),e=g.offsetTop}return{top:e,left:f}}function Qc(a,b){var c,d=Wc(),e=d*(X(Ia,a.line)-(b?_a:0));if(0==a.ch)c=0;else{var g=Pc(pb(a.line),a.ch);c=g.left,f.lineWrapping&&(e+=Math.max(0,g.top))}return{x:c,y:e,yBot:e+d}}function Rc(a,b){function m(a){var b=Pc(h,a);if(j){var d=Math.round(b.top/c);return l=d!=k,Math.max(0,b.left+(d-k)*la.clientWidth)}return b.left}var c=Wc(),d=Zc(),e=_a+Math.floor(b/c);if(e<0)return{line:0,ch:0};var g=W(Ia,e);if(g>=Ia.size)return{line:Ia.size-1,ch:pb(Ia.size-1).text.length};var h=pb(g),i=h.text,j=f.lineWrapping,k=j?e-X(Ia,g):0;if(a<=0&&0==k)return{line:g,ch:0};for(var q,l=!1,n=0,o=0,p=i.length,r=Math.min(p,Math.ceil((a+k*la.clientWidth*.9)/d));;){var s=m(r);if(!(s<=a&&r<p)){q=s,p=r;break}r=Math.min(p,Math.ceil(1.2*r))}if(a>q)return{line:g,ch:p};for(r=Math.floor(.8*p),s=m(r),s<a&&(n=r,o=s);;){if(p-n<=1){var t=a-o<q-a;return{line:g,ch:t?n:p,after:t}}var u=Math.ceil((n+p)/2),v=m(u);v>a?(p=u,q=v,l&&(q+=1e3)):(n=u,o=v)}}function Sc(a){var b=Qc(a,!0),c=ma(Q);return{x:c.left+b.x,y:c.top+b.y,yBot:c.top+b.yBot}}function Wc(){if(null==Vc){Vc=va("pre");for(var a=0;a<49;++a)Vc.appendChild(document.createTextNode("x")),Vc.appendChild(va("br"));Vc.appendChild(document.createTextNode("x"))}var b=F.clientHeight;return b==Uc?Tc:(Uc=b,xa(P,Vc.cloneNode(!0)),Tc=P.firstChild.offsetHeight/50||1,wa(P),Tc)}function Zc(){if(la.clientWidth==Yc)return Xc;Yc=la.clientWidth;var a=va("span","x"),b=va("pre",[a]);return xa(P,b),Xc=a.offsetWidth||10}function $c(){return Q.offsetTop}function _c(){return Q.offsetLeft}function ad(a,b){var d,e,c=ma(la,!0);try{d=a.clientX,e=a.clientY}catch(a){return null}if(!b&&(d-c.left>la.clientWidth||e-c.top>la.clientHeight))return null;var f=ma(Q,!0);return Rc(d-f.left,e-f.top)}function cd(a){function e(){if(x.style.position="relative",v.style.cssText=d,r&&(E.scrollTop=c),Xb(),null!=v.selectionStart){clearTimeout(bd);var a=v.value=" "+(sa(La.from,La.to)?"":v.value),b=0;Zb=" ",v.selectionStart=1,v.selectionEnd=a.length,bd=setTimeout(function a(){" "==Zb&&0==v.selectionStart?nd(j.selectAll)(ob):b++<10?bd=setTimeout(a,500):_b()},200)}}var b=ad(a),c=E.scrollTop;if(b&&!w){(sa(La.from,La.to)||ta(b,La.from)||!ta(b,La.to))&&nd(pc)(b.line,b.ch);var d=v.style.cssText;if(x.style.position="absolute",v.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ac(),_b(!0),sa(La.from,La.to)&&(v.value=Zb=" "),o){ba(a);var f=fa(window,"mouseup",function(){f(),setTimeout(e,20)},!0)}else setTimeout(e,50)}}function dd(){clearInterval(Ga);var a=!0;J.style.visibility="",Ga=setInterval(function(){J.style.visibility=(a=!a)?"":"hidden"},f.cursorBlinkRate)}function fd(a){function p(a,b,c){if(a.text)for(var f,d=a.styles,e=g?0:a.text.length-1,i=g?0:d.length-2,j=g?d.length:-2;i!=j;i+=2*h){var k=d[i];if(d[i+1]==m){for(var l=g?0:k.length-1,p=g?k.length:-1;l!=p;l+=h,e+=h)if(e>=b&&e<c&&o.test(f=k.charAt(l))){var q=ed[f];if(">"==q.charAt(1)==g)n.push(f);else{if(n.pop()!=q.charAt(0))return{pos:e,match:!1};if(!n.length)return{pos:e,match:!0}}}}else e+=h*k.length}}var b=La.inverted?La.from:La.to,c=pb(b.line),d=b.ch-1,e=d>=0&&ed[c.text.charAt(d)]||ed[c.text.charAt(++d)];if(e){for(var g=(e.charAt(0),">"==e.charAt(1)),h=g?1:-1,i=c.styles,j=d+1,k=0,l=i.length;k<l;k+=2)if((j-=i[k].length)<=0){var m=i[k+1];break}for(var n=[c.text.charAt(d)],o=/[(){}[\]]/,k=b.line,l=g?Math.min(k+100,Ia.size):Math.max(-1,k-100);k!=l;k+=h){var c=pb(k),q=k==b.line,r=p(c,q&&g?d+1:0,q&&!g?d:c.text.length);if(r)break}r||(r={pos:null,match:!1});var m=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",s=Gc({line:b.line,ch:d},{line:b.line,ch:d+1},m),t=null!=r.pos&&Gc({line:k,ch:r.pos},{line:k,ch:r.pos+1},m),u=nd(function(){s.clear(),t&&t.clear()});a?setTimeout(u,800):db=u}}function gd(a){for(var b,c,d=a,e=a-40;d>e;--d){if(0==d)return 0;var g=pb(d-1);if(g.stateAfter)return d;var h=g.indentation(f.tabSize);(null==c||b>h)&&(c=d-1,b=h)}return c}function hd(a){var b=gd(a),c=b&&pb(b-1).stateAfter;return c=c?C(Ha,c):D(Ha),Ia.iter(b,a,function(d){d.process(Ha,c,f.tabSize),d.stateAfter=b==a-1||b%5==0?C(Ha,c):null}),c}function id(){if(!(Ja>=bb)){var a=+new Date+f.workTime,b=C(Ha,hd(Ja)),c=Ja;Ia.iter(Ja,bb,function(c){if(Ja>=ab?(c.highlight(Ha,b,f.tabSize),c.stateAfter=C(Ha,b)):(c.process(Ha,b,f.tabSize),c.stateAfter=Ja%5==0?C(Ha,b):null),++Ja,+new Date>a)return jd(f.workDelay),!0}),bb>c&&Ja>=ab&&nd(function(){Wa.push({from:c,to:Ja})})()}}function jd(a){Ja<bb&&Ba.set(a,id)}function kd(){Ua=Va=Xa=null,Wa=[],Ya=!1,$a=[]}function ld(){if(fb&&Rb(),gb&&!f.lineWrapping){var a=O.offsetWidth,b=Pc(eb,eb.text.length).left;q||(O.style.left=b+"px",Q.style.minWidth=b+a+"px"),gb=!1}var c,d;if(Ya){var e=cc();c=ec(e.x,e.y,e.x,e.yBot)}(Wa.length||c&&null!=c.scrollTop)&&(d=gc(Wa,!0,c&&c.scrollTop)),d||(Ya&&kc(),Za&&jc()),c&&bc(),Ya&&dd(),Ka&&(Ua===!0||Ua!==!1&&Ya)&&_b(Va),Ya&&f.matchBrackets&&setTimeout(nd(function(){db&&(db(),db=null),sa(La.from,La.to)&&fd(!1)}),20);var g=Ya,h=$a;Xa&&f.onChange&&ob&&f.onChange(ob,Xa),g&&f.onCursorActivity&&f.onCursorActivity(ob);for(var i=0;i<h.length;++i)h[i](ob);d&&f.onUpdate&&f.onUpdate(ob)}function nd(a){return function(){md++||kd();try{var b=a.apply(this,arguments)}finally{--md||ld()}return b}}function od(a){jb.startCompound();try{return a()}finally{jb.endCompound()}}var f={},i=a.defaults;for(var u in i)i.hasOwnProperty(u)&&(f[u]=(e&&e.hasOwnProperty(u)?e:i)[u]);var v=va("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");v.setAttribute("wrap","off"),v.setAttribute("autocorrect","off"),v.setAttribute("autocapitalize","off");var x=va("div",[v],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),A=va("div",null,"CodeMirror-scrollbar-inner"),E=va("div",[A],"CodeMirror-scrollbar"),F=va("div"),I=va("div",null,null,"position: relative; z-index: -1"),J=va("pre"," ","CodeMirror-cursor"),O=va("pre"," ","CodeMirror-cursor","visibility: hidden"),P=va("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),Q=va("div",[P,J,O,I,F],null,"position: relative; z-index: 0"),Z=va("div",null,"CodeMirror-gutter-text"),aa=va("div",[Z],"CodeMirror-gutter"),ja=va("div",[aa,va("div",[Q],"CodeMirror-lines")],null,"position: relative"),ka=va("div",[ja],null,"position: relative"),la=va("div",[ka],"CodeMirror-scroll");la.setAttribute("tabIndex","-1");var oa=va("div",[x,E,la],"CodeMirror"+(f.lineWrapping?" CodeMirror-wrap":""));d.appendChild?d.appendChild(oa):d(oa),Dc(),Ec(),b&&(v.style.width="0px"),t||(la.draggable=!0),Q.style.outline="none",null!=f.tabindex&&(v.tabIndex=f.tabindex),f.autofocus&&ac(),f.gutter||f.lineNumbers||(aa.style.display="none"),y&&(x.style.height="1px",x.style.position="absolute"),z?(E.style.zIndex=-2,E.style.visibility="hidden"):q&&(E.style.minWidth="18px");var Ga,Ha,Ka,ya=new ga,Ba=new ga,Ia=new T([new S([new R("")])]),Ja=0;Ac();var Ma,Na,Oa,Qa,Ua,Va,Wa,Xa,Ya,Za,$a,db,La={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Pa=0,Ra=!1,Sa=!1,Ta=!1,_a=0,ab=0,bb=0,cb=0,eb=pb(0),fb=!1,gb=!0,hb=!1,ib=null;nd(function(){sb(f.value||""),Ua=!1})();var jb=new Y;fa(la,"mousedown",nd(wb)),fa(la,"dblclick",nd(xb)),fa(Q,"selectstart",_),o||fa(la,"contextmenu",cd),fa(la,"scroll",vb),fa(E,"scroll",ub),fa(E,"mousedown",function(){Ka&&setTimeout(ac,0)});var kb=fa(window,"resize",function(){oa.parentNode?gc(!0):kb()},!0);fa(v,"keyup",nd(Hb)),fa(v,"input",Yb),fa(v,"keydown",nd(Fb)),fa(v,"keypress",nd(Gb)),fa(v,"focus",Ib),fa(v,"blur",Jb),f.dragDrop&&(fa(la,"dragstart",zb),fa(la,"dragenter",lb),fa(la,"dragover",lb),fa(la,"drop",nd(yb))),fa(la,"paste",function(){ac(),Yb()}),fa(v,"paste",function(){Ta=!0,Yb()}),fa(v,"cut",nd(function(){f.readOnly||Tb("")})),y&&fa(ka,"mouseup",function(){document.activeElement==v&&v.blur(),ac()});var mb;try{mb=document.activeElement==v}catch(a){}mb||f.autofocus?setTimeout(Ib,20):Jb();var Bb,ob=oa.CodeMirror={getValue:tb,setValue:nd(sb),getSelection:Wb,replaceSelection:nd(Tb),focus:function(){window.focus(),ac(),Ib(),Yb()},setOption:function(a,b){var c=f[a];f[a]=b,"mode"==a||"indentUnit"==a?Ac():"readOnly"==a&&"nocursor"==b?(Jb(),v.blur()):"readOnly"!=a||b?"theme"==a?Dc():"lineWrapping"==a&&c!=b?nd(Cc)():"tabSize"==a?gc(!0):"keyMap"==a?Ec():"tabindex"==a?v.tabIndex=b:"showCursorWhenSelecting"==a&&kc():_b(!0),"lineNumbers"!=a&&"gutter"!=a&&"firstLineNumber"!=a&&"theme"!=a&&"lineNumberFormatter"!=a||(Bc(),gc(!0))},getOption:function(a){return f[a]},getMode:function(){return Ha},undo:nd(Mb),redo:nd(Nb),indentLine:nd(function(a,b){"string"!=typeof b&&(b=null==b?f.smartIndent?"smart":"prev":b?"add":"subtract"),nb(a)&&zc(a,b)}),indentSelection:nd(yc),historySize:function(){return{undo:jb.done.length,redo:jb.undone.length}},clearHistory:function(){jb=new Y},setHistory:function(a){jb=new Y,jb.done=a.done,jb.undone=a.undone},getHistory:function(){function a(a){for(var d,b=0,c=[];b<a.length;++b){c.push(d=[]);for(var e=0,f=a[b];e<f.length;++e){var g=[],h=f[e];d.push({start:h.start,added:h.added,old:g});for(var i=0;i<h.old.length;++i)g.push(L(h.old[i]))}}return c}return{done:a(jb.done),undone:a(jb.undone)}},matchBrackets:nd(function(){fd(!0)}),getTokenAt:nd(function(a){return a=rc(a),pb(a.line).getTokenAt(Ha,hd(a.line),f.tabSize,a.ch)}),getStateAfter:function(a){return a=qc(null==a?Ia.size-1:a),hd(a+1)},cursorCoords:function(a,b){return null==a&&(a=La.inverted),this.charCoords(a?La.from:La.to,b)},charCoords:function(a,b){return a=rc(a),"local"==b?Qc(a,!1):"div"==b?Qc(a,!0):Sc(a)},coordsChar:function(a){var b=ma(Q);return Rc(a.x-b.left,a.y-b.top)},defaultTextHeight:function(){return Wc()},markText:nd(Gc),setBookmark:Hc,findMarksAt:Ic,setMarker:nd(Jc),clearMarker:nd(Kc),setLineClass:nd(Mc),hideLine:nd(function(a){return Nc(a,!0)}),showLine:nd(function(a){return Nc(a,!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!nb(a))return null;a=pb(a)}return(a.handlers||(a.handlers=[])).push(b),a},lineInfo:Oc,getViewport:function(){return{from:ab,to:bb}},addWidget:function(a,b,c,d,e){a=Qc(rc(a));var f=a.yBot,g=a.x;if(b.style.position="absolute",ka.appendChild(b),"over"==d)f=a.y;else if("near"==d){var h=Math.max(la.offsetHeight,Ia.height*Wc()),i=Math.max(ka.clientWidth,Q.clientWidth)-_c();a.yBot+b.offsetHeight>h&&a.y>b.offsetHeight&&(f=a.y-b.offsetHeight),g+b.offsetWidth>i&&(g=i-b.offsetWidth)}b.style.top=f+$c()+"px",b.style.left=b.style.right="","right"==e?(g=ka.clientWidth-b.offsetWidth,
b.style.right="0px"):("left"==e?g=0:"middle"==e&&(g=(ka.clientWidth-b.offsetWidth)/2),b.style.left=g+_c()+"px"),c&&dc(g,f,g+b.offsetWidth,f+b.offsetHeight)},lineCount:function(){return Ia.size},clipPos:rc,getCursor:function(a){return null!=a&&"head"!=a||(a=La.inverted),"anchor"==a&&(a=!La.inverted),"end"==a&&(a=!1),ua(a?La.from:La.to)},somethingSelected:function(){return!sa(La.from,La.to)},setCursor:nd(function(a,b,c){null==b&&"number"==typeof a.line?pc(a.line,a.ch,c):pc(a,b,c)}),setSelection:nd(function(a,b,c){(c?mc:nc)(rc(a),rc(b||a))}),getLine:function(a){if(nb(a))return pb(a).text},getLineHandle:function(a){if(nb(a))return pb(a)},setLine:nd(function(a,b){nb(a)&&Sb(b,{line:a,ch:0},{line:a,ch:pb(a).text.length})}),removeLine:nd(function(a){nb(a)&&Sb("",{line:a,ch:0},rc({line:a+1,ch:0}))}),replaceRange:nd(Sb),getRange:function(a,b,c){return Vb(rc(a),rc(b),c)},triggerOnKeyDown:nd(Fb),execCommand:function(a){return j[a](ob)},moveH:nd(tc),deleteH:nd(uc),moveV:nd(vc),toggleOverwrite:function(){Ra?(Ra=!1,J.className=J.className.replace(" CodeMirror-overwrite","")):(Ra=!0,J.className+=" CodeMirror-overwrite")},posFromIndex:function(a){var c,b=0;return Ia.iter(0,Ia.size,function(d){var e=d.text.length+1;return e>a?(c=a,!0):(a-=e,void++b)}),rc({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;return Ia.iter(0,a.line,function(a){b+=a.text.length+1}),b},scrollTo:function(a,b){null!=a&&(la.scrollLeft=a),null!=b&&(E.scrollTop=la.scrollTop=b),gc([])},getScrollInfo:function(){return{x:la.scrollLeft,y:E.scrollTop,height:E.scrollHeight,width:la.scrollWidth}},scrollIntoView:function(a){var b=Qc(a?rc(a):La.inverted?La.from:La.to);dc(b.x,b.y,b.x,b.yBot)},setSize:function(a,b){function c(a){return a=String(a),/^\d+$/.test(a)?a+"px":a}null!=a&&(oa.style.width=c(a)),null!=b&&(la.style.height=c(b)),ob.refresh()},operation:function(a){return nd(a)()},compoundChange:function(a){return od(a)},refresh:function(){gc(!0,null,Pa),E.scrollHeight>Pa&&(E.scrollTop=Pa)},getInputField:function(){return v},getWrapperElement:function(){return oa},getScrollerElement:function(){return la},getGutterElement:function(){return aa}},Eb=null,Zb="";Fc.prototype.clear=nd(function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=G(d.markedSpans,this);null!=e.from&&(a=V(d)),null!=e.to&&(b=V(d)),d.markedSpans=H(d.markedSpans,e)}null!=a&&Wa.push({from:a,to:b+1}),this.lines.length=0,this.explicitlyCleared=!0}),Fc.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=G(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=V(d);null!=e.from&&(a={line:f,ch:e.from}),null!=e.to&&(b={line:f,ch:e.to})}}return"bookmark"==this.type?a:a&&{from:a,to:b}};var Tc,Uc,Vc,Xc,bd,Yc=0,ed={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},md=0;for(var pd in g)g.propertyIsEnumerable(pd)&&!ob.propertyIsEnumerable(pd)&&(ob[pd]=g[pd]);for(var qd=0;qd<h.length;++qd)h[qd](ob);return ob}function l(a){return"string"==typeof a?k[a]:a}function m(a,b,c,d,e){function f(b){b=l(b);var c=b[a];if(c===!1)return e&&e(),!0;if(null!=c&&d(c))return!0;if(b.nofallthrough)return e&&e(),!0;var g=b.fallthrough;if(null==g)return!1;if("[object Array]"!=Object.prototype.toString.call(g))return f(g);for(var h=0,i=g.length;h<i;++h)if(f(g[h]))return!0;return!1}return!(!b||!f(b))||f(c)}function n(a){var b=Fa[ea(a,"keyCode")];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function C(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function D(a,b,c){return!a.startState||a.startState(b,c)}function E(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8}function G(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function H(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function I(a,b,c){if(a)for(var e,d=0;d<a.length;++d){var f=a[d],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||"bookmark"==g.type&&f.from==b&&f.from!=c){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(e||(e=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return e}function J(a,b){if(a)for(var d,c=0;c<a.length;++c){var e=a[c],f=e.marker,g=null==e.to||(f.inclusiveRight?e.to>=b:e.to>b);if(g||"bookmark"==f.type&&e.from==b){var h=null==e.from||(f.inclusiveLeft?e.from<=b:e.from<b);(d||(d=[])).push({from:h?null:e.from-b,to:null==e.to?null:e.to-b,marker:f})}}return d}function K(a,b,c,d,e){if(!a&&!b)return e;var f=I(a,c),g=J(b,d),h=1==e.length,i=qa(e).length+(h?c:0);if(f)for(var j=0;j<f.length;++j){var k=f[j];if(null==k.to){var l=G(g,k.marker);l?h&&(k.to=null==l.to?null:l.to+i):k.to=c}}if(g)for(var j=0;j<g.length;++j){var k=g[j];if(null!=k.to&&(k.to+=i),null==k.from){var l=G(f,k.marker);l||(k.from=i,h&&(f||(f=[])).push(k))}else k.from+=i,h&&(f||(f=[])).push(k)}var m=[N(e[0],f)];if(!h){var o,n=e.length-2;if(n>0&&f)for(var j=0;j<f.length;++j)null==f[j].to&&(o||(o=[])).push({from:null,to:null,marker:f[j].marker});for(var j=0;j<n;++j)m.push(N(e[j+1],o));m.push(N(qa(e),g))}return m}function L(a){return"string"==typeof a?a:a.text}function M(a){if("string"==typeof a)return null;for(var b=a.markedSpans,c=null,d=0;d<b.length;++d)b[d].marker.explicitlyCleared?c||(c=b.slice(0,d)):c&&c.push(b[d]);return c?c.length?c:null:b}function N(a,b){return b?{text:a,markedSpans:b}:a}function O(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c){var d=b[c].marker.lines,e=Aa(d,a);d.splice(e,1)}a.markedSpans=null}}function P(a,b){if(b){for(var c=0;c<b.length;++c){b[c].marker.lines.push(a)}a.markedSpans=b}}function R(a,b){this.text=a,this.height=1,P(this,b)}function S(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function T(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function U(a,b){for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function V(a){if(null==a.parent)return null;for(var b=a.parent,c=Aa(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c}function W(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;d<e;++d){var h=a.lines[d],i=h.height;if(b<i)break;b-=i}return c+d}function X(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.chunkSize();if(b<g){a=f;continue a}b-=g,c+=f.height}return c}while(!a.lines);for(var d=0;d<b;++d)c+=a.lines[d].height;return c}function Y(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function Z(){ba(this)}function $(a){return a.stop||(a.stop=Z),a}function _(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function aa(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function ba(a){_(a),aa(a)}function ca(a){return a.target||a.srcElement}function da(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),c&&a.ctrlKey&&1==b&&(b=3),b}function ea(a,b){var c=a.override&&a.override.hasOwnProperty(b);return c?a.override[b]:a[b]}function fa(a,b,c,d){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),d)return function(){a.removeEventListener(b,c,!1)}}else{var e=function(a){c(a||window.event)};if(a.attachEvent("on"+b,e),d)return function(){a.detachEvent("on"+b,e)}}}function ga(){this.id=null}function la(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),b==-1&&(b=a.length));for(var d=0,e=0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function ma(a,b){try{var c=a.getBoundingClientRect();c={top:c.top,left:c.left}}catch(a){c={top:0,left:0}}if(!b)if(null==window.pageYOffset){var d=document.documentElement||document.body.parentNode;null==d.scrollTop&&(d=document.body),c.top+=d.scrollTop,c.left+=d.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c}function na(a){return a.textContent||a.innerText||a.nodeValue||""}function pa(a){for(;oa.length<=a;)oa.push(qa(oa)+" ");return oa[a]}function qa(a){return a[a.length-1]}function ra(a){b?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function sa(a,b){return a.line==b.line&&a.ch==b.ch}function ta(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function ua(a){return{line:a.line,ch:a.ch}}function va(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)ya(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function wa(a){return a.innerHTML="",a}function xa(a,b){wa(a).appendChild(b)}function ya(a,b){r?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function za(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;c>=0&&d>=0&&a.charAt(c)==b.charAt(d);--c,--d);return d+1}function Aa(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function Ca(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||Ba.test(a))}a.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,showCursorWhenSelecting:!1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var b=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),c=b||/Mac/.test(navigator.platform),e=(/Win/.test(navigator.platform),a.modes={}),f=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}e[b]=c},a.defineMIME=function(a,b){f[a]=b},a.resolveMode=function(b){if("string"==typeof b&&f.hasOwnProperty(b))b=f[b];else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=e[c.name];if(!d)return a.getMode(b,"text/plain");var f=d(b,c);if(i.hasOwnProperty(c.name)){var g=i[c.name];for(var h in g)g.hasOwnProperty(h)&&(f.hasOwnProperty(h)&&(f["_"+h]=f[h]),f[h]=g[h])}return f.name=c.name,f},a.listModes=function(){var a=[];for(var b in e)e.propertyIsEnumerable(b)&&a.push(b);return a},a.listMIMEs=function(){var a=[];for(var b in f)f.propertyIsEnumerable(b)&&a.push({mime:b,mode:f[b]});return a};var g=a.extensions={};a.defineExtension=function(a,b){g[a]=b};var h=[];a.defineInitHook=function(a){h.push(a)};var i=a.modeExtensions={};a.extendMode=function(a,b){var c=i.hasOwnProperty(a)?i[a]:i[a]={};for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};var j=a.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!sa(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:{line:b.line}):a.replaceRange("",b,{line:b.line+1,ch:0})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),d=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=d&&b.ch?0:d,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end"),a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},k=a.keyMap={};k.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},k.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},k.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},k.default=c?k.macDefault:k.pcDefault,k.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.isModifierKey=n,a.fromTextArea=function(b,c){function e(){b.value=i.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),null==c.autofocus){var d=document.body;try{d=document.activeElement}catch(a){}c.autofocus=d==b||null!=b.getAttribute("autofocus")&&d==document.body}if(b.form){var f=fa(b.form,"submit",e,!0),g=b.form,h=g.submit;b.form.submit=function a(){e(),g.submit=h,g.submit(),g.submit=a}}b.style.display="none";var i=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return i.save=e,i.getTextArea=function(){return b},i.toTextArea=function(){e(),b.parentNode.removeChild(i.getWrapperElement()),b.style.display="",b.form&&(f(),"function"==typeof b.form.submit&&(b.form.submit=h))},i};var o=/gecko\/\d/i.test(navigator.userAgent),p=/MSIE \d/.test(navigator.userAgent),q=/MSIE [1-7]\b/.test(navigator.userAgent),r=/MSIE [1-8]\b/.test(navigator.userAgent),s=p&&5==document.documentMode,t=/WebKit\//.test(navigator.userAgent),u=t&&/Qt\/\d+\.\d+/.test(navigator.userAgent),v=/Chrome\//.test(navigator.userAgent),w=/Opera\//.test(navigator.userAgent),x=/Apple Computer/.test(navigator.vendor),y=/KHTML\//.test(navigator.userAgent),z=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),A=w&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);A&&(A=Number(A[1]));var B=c&&(u||w&&(null==A||A<12.11));a.copyState=C,a.startState=D,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);b=c.state,a=c.mode}return c||{mode:a,state:b}},E.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c)return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},backUp:function(a){this.pos-=a},column:function(){return la(this.string,this.start,this.tabSize)},indentation:function(){return la(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var e=this.string.slice(this.pos).match(a);return e&&e.index>0?null:(e&&b!==!1&&(this.pos+=e[0].length),e)}var d=function(a){return c?a.toLowerCase():a};if(d(this.string).indexOf(d(a),this.pos)==this.pos)return b!==!1&&(this.pos+=a.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=E;var Q=" ";o||p&&!q?Q="​":w&&(Q=""),R.prototype={update:function(a,b){this.text=a,this.stateAfter=this.styles=null,O(this),P(this,b)},highlight:function(a,b,c){var d=new E(this.text,c),e=this.styles||(this.styles=[]),f=e.length=0;for(""==this.text&&a.blankLine&&a.blankLine(b);!d.eol();){var g=a.token(d,b),h=d.current();if(d.start=d.pos,f&&e[f-1]==g?e[f-2]+=h:h&&(e[f++]=h,e[f++]=g),d.pos>5e3){e[f++]=this.text.slice(d.pos),e[f++]=null;break}}},process:function(a,b,c){var d=new E(this.text,c);for(""==this.text&&a.blankLine&&a.blankLine(b);!d.eol()&&d.pos<=5e3;)a.token(d,b),d.start=d.pos},getTokenAt:function(a,b,c,d){for(var e=this.text,f=new E(e,c);f.pos<d&&!f.eol();){f.start=f.pos;var g=a.token(f,b)}return{start:f.start,end:f.pos,string:f.current(),className:g||null,state:b}},indentation:function(a){return la(this.text,null,a)},getContent:function(a,b,c){function h(b,c,g){if(c){if(d&&p&&" "==c.charAt(0)&&(c=" "+c.slice(1)),d=!1,f.test(c))for(var h=document.createDocumentFragment(),i=0;;){f.lastIndex=i;var j=f.exec(c),k=j?j.index-i:c.length-i;if(k&&(h.appendChild(document.createTextNode(c.slice(i,i+k))),e+=k),!j)break;if(i+=k+1,"\t"==j[0]){var l=a-e%a;h.appendChild(va("span",pa(l),"cm-tab")),e+=l}else{var m=va("span","•","cm-invalidchar");m.title="\\u"+j[0].charCodeAt(0).toString(16),h.appendChild(m),e+=1}}else{e+=c.length;var h=document.createTextNode(c)}g?b.appendChild(va("span",[h],g)):b.appendChild(h)}}function r(a){return a?"cm-"+a.replace(/ +/g," cm-"):null}var d=!0,e=0,f=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,g=va("pre"),i=h;if(null!=b){var j=0,k=g.anchor=va("span");i=function(a,d,e){var f=d.length;if(b>=j&&b<j+f){var g=b-j;if(g&&(h(a,d.slice(0,g),e),c)){var l=d.slice(g-1,g+1);ka.test(l)?a.appendChild(va("wbr")):!q&&/\w\w/.test(l)&&a.appendChild(document.createTextNode("‍"))}a.appendChild(k),h(k,w?d.slice(g,g+1):d.slice(g),e),w&&h(a,d.slice(g+1),e),b--,j+=f}else j+=f,h(a,d,e),j==b&&j==o?(ya(k,Q),a.appendChild(k)):j>b+10&&/\s/.test(d)&&(i=function(){})}}var l=this.styles,m=this.text,n=this.markedSpans,o=m.length;if(m||null!=b)if(n&&n.length){n.sort(function(a,b){return a.from-b.from});for(var v,y=0,s=0,z="",B=n[0].from||0,C=[],D=0,E=function(){for(var a;D<n.length&&((a=n[D]).from==y||null==a.from);)"range"==a.marker.type&&C.push(a),++D;B=D<n.length?n[D].from:1/0;for(var b=0;b<C.length;++b){var c=C[b].to;null==c&&(c=1/0),c==y?C.splice(b--,1):B=Math.min(c,B)}};y<o;){B==y&&E();for(var G=Math.min(o,B);;){if(z){for(var H=y+z.length,I=v,J=0;J<C.length;++J){var K=C[J];I=(I?I+" ":"")+K.marker.style,K.marker.endStyle&&K.to===Math.min(H,G)&&(I+=" "+K.marker.endStyle),K.marker.startStyle&&K.from===y&&(I+=" "+K.marker.startStyle)}if(i(g,H>G?z.slice(0,G-y):z,I),H>=G){z=z.slice(G-y),y=G;break}y=H}z=l[s++],v=r(l[s++])}}}else for(var s=0,t=0;t<o;s+=2){var u=l[s],v=l[s+1],x=u.length;t+x>o&&(u=u.slice(0,o-t)),t+=x,i(g,u,r(v))}else i(g," ");return g},cleanUp:function(){this.parent=null,O(this)}},S.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];if(this.height-=f.height,f.cleanUp(),f.handlers)for(var g=0;g<f.handlers.length;++g)c.push(f.handlers[g])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;d<e;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return!0}},T.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;if(e.remove(a,g,c),this.height-=h-e.height,f==g&&(this.children.splice(d--,1),e.parent=null),0==(b-=g))break;a=0}else a-=f}if(this.size-b<25){var i=[];this.collapse(i),this.children=[new S(i)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){if(f.insertHeight(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new S(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new T(b);if(a.parent){a.size-=c.size,a.height-=c.height;var e=Aa(a.parent.children,a);a.parent.children.splice(e+1,0,c)}else{var d=new T(a.children);d.parent=a,a.children=[d,c],a=d}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}},Y.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+new Date,e=qa(this.done),f=e&&qa(e),g=d-this.time;if(e&&!this.closed&&this.compound)e.push({start:a,added:b,old:c});else if(g>400||!f||this.closed||f.start>a+c.length||f.start+f.added<a)this.done.push([{start:a,added:b,old:c}]),this.closed=!1;else{for(var h=Math.max(0,f.start-a),i=Math.max(0,a+c.length-(f.start+f.added)),j=h;j>0;--j)f.old.unshift(c[j-1]);for(var j=i;j>0;--j)f.old.push(c[c.length-j]);h&&(f.start=a),f.added+=b-(c.length-h-i)}this.time=d},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},a.e_stop=ba,a.e_preventDefault=_,a.e_stopPropagation=aa,a.connect=fa,ga.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}};var ha=a.Pass={toString:function(){return"CodeMirror.Pass"}},ia=function(){if(r)return!1;var a=va("div");return"draggable"in a||"dragDrop"in a}(),ka=(function(){var a=va("textarea");return a.value="foo\nbar",a.value.indexOf("\r")>-1?"\r\n":"\n"}(),/^$/);o?ka=/$'/:x?ka=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:v&&(ka=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var oa=[""],Ba=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,Da=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);e==-1&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");g!=-1?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=Da;var Ea=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(a){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(a){}return!(!b||b.parentElement()!=a)&&0!=b.compareEndPoints("StartToEnd",b)};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var Fa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return a.keyNames=Fa,function(){for(var a=0;a<10;a++)Fa[a+48]=String(a);for(var a=65;a<=90;a++)Fa[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)Fa[a+111]=Fa[a+63235]="F"+a}(),a.version="2.38 +",a}();